{% load static %}
<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="{{get_infos_web.picture.url}}" type="">

  <title> {{page.title}} </title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href=" {% static 'app/css/bootstrap.css' %} " />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!--owl slider stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v6.2.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- font awesome style -->
  <link href="{% static 'app/css/font-awesome.min.css' %}" rel="stylesheet" />

  <!-- Custom styles for this template -->

  <link href="{% static 'app/css/style1.css' %}" rel="stylesheet" />
  <link href="{% static 'app/css/style.css' %}" rel="stylesheet" />
  <link href="{% static 'app/css/responsive.css' %}" rel="stylesheet" />
  <link href="{% static 'app/css/slick.css' %}" rel="stylesheet" />
  <!-- responsive style -->



</head>

<body>
  <!-- Menu-->
  {% if is_true %}
  {% else %}
  <header class="b-nav">
    <a href="{% url 'welcome' %}" class="nav-icon" aria-label="visit-home" aria-current="page">
      <img src="{{get_infos_web.picture.url}}" alt="logo" srcset=""><span>DE-MISSA</span>
    </a>

    <div class="middle">
        <span><i class="fa-solid fa-plus"></i></span> <a href="{% url 'service' %}"> Demande un service</a>
    </div>

    <div class="main-navlink">
      <button class="hamburger" type="button" aria-label="Toggle navigation" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
        
      <div class="navlinks-container">
          <a href="{% url 'welcome' %}" aria-current="page">Accueil</a>
          <a href="{% url 'service' %}" >Demander un devis</a>
          <a href="{% url 'welcome' %}" >A propos</a>
      </div>
    </div>
  </header>

  {% endif %}

{% block content %}



{% endblock content %}



  <!-- footer section -->
  {% if is_true %}
  
  {% else %}
  <section class="footer_section">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-2 mx-auto footer_col">
          <div class="footer_link_box">
            <h4 style="text-decoration: underline;">
              Services
            </h4>
            <div class="footer_links">
              <a class="active" href="{% url 'service' %}">
                Démander un service
              </a>
              <a class="" href="about.html">
                Suivre une formation
              </a>
              <a class="" href="{% url 'service' %}">
                Dévenir jobber
              </a>
              
            </div>
          </div>
        </div>
        
        <div class="col-md-6 col-lg-2 mx-auto footer_col">
          <div class="footer_link_box">
            <h4 style="text-decoration: underline;">
              Autre page
            </h4>
            <div class="footer_links">
              <a class="active" href="{% url 'welcome' %}">
                Notre Assurance
              </a>
              <a class="" href="about.html">
                Réglement
              </a>
              <a class="" href="{% url 'service' %}">
                Mode de facturation
              </a>
              
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 mx-auto footer_col">
          <div class="footer_contact">
            <h4 style="text-decoration: underline;">
              Contacter nous
            </h4>
            <div class="contact_link_box">
              <a href="">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span>
                  Cocody /Bonoumin / Phare
                </span>
              </a>
              <a href="">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  Tel +225 07 57 80 03 66
                </span>
              </a>
              <a href="">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>
                  info.demissa@gmail.com
                </span>
              </a>
            </div>
          </div>

          <div class="footer_social">
            {% for social in get_socials %}
              <a href="{{social.link}}">
                <i class="{{social.icon}}" aria-hidden="true"></i>
              </a>
            {% endfor %}
          </div>

        </div>
        
        <div class="col-md-6 col-lg-3 mx-auto footer_col">
          <div class="footer_detail">
            <h4 style="text-decoration: underline;">
              A propos de DE-MISSA
            </h4>
            <p>
              DE-MISSA est une start-up innovatrice,
              qui intervient dans le secteur informel
              des petits metiers.
              Avec un nouveau concept qui est Jobber
            </p>
          </div>
        </div>

      </div> 
    </div>
  </section>
    


    
  <footer  style="background-color:  rgba(29, 29, 29, 0.945);">
    <div class="container">
      <div class="row footer-info d-flex justify-content-center">
        
          <p class="">
            &copy; Copyright <span style="color:green; font-weight:bold"> DE-MISSA.</span> All Rights Reserved
            <!--<span id="displayYear"></span> -->
          </p>
         
      </div>
    </div>
  </footer>
 {% endif %}
  <!-- footer section -->

  <!-- popper js -->
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap">
  </script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script>
  <!-- bootstrap js -->
  <!-- jQery -->
  <script type="text/javascript" src="{% static 'app/js/jquery-3.4.1.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/bootstrap.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/slick.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/vue.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/custom.js' %}"></script>
  <!-- owl slider -->
  <!-- custom js -->
  <!-- Google Map -->
  <!-- End Google Map -->
  <script async src='https://stackwhats.com/pixel/f70e57d8298b8d2d176d4c1a75fe80'></script>
  <script>
    const humburgerToggler = document.querySelector(".hamburger");
    const navLinksContainer = document.querySelector(".navlinks-container");
    var nav = document.querySelector(".b-nav");

    window.addEventListener('scroll', function(){
      if(window.pageYOffset > 80){
        nav.classList.add('white', 'shadow');
        nav.style.background = "#fafafa";
        nav.style.transition = "0.4s";
      }else{
        nav.classList.remove('white', 'shadow');
        nav.style.background = "transparent";
      }
    })

    const toggleNav = () => {
      humburgerToggler.classList.toggle("open")
      const ariaToggle = humburgerToggler.getAttribute("aria-expanded") === "true" ? "false" : "true";
      humburgerToggler.setAttribute("aria-expanded", ariaToggle)
      navLinksContainer.classList.toggle("open")
      navLinksContainer.classList.add('white', 'shadow');
      window.addEventListener('click', function(){
        if(window.pageYOffset == 0 && ariaToggle == "true"){
          console.log(ariaToggle)
          nav.style.background = "#fafafa";
          nav.classList.add('white', 'shadow');
          nav.style.transition = "0.4s";
        }
      })
    }

    humburgerToggler.addEventListener("click", toggleNav)
    new ResizeObserver(entries => {
        if(entries[0].contentRect.width <= 950){
          navLinksContainer.style.transition = "transform 0.4s ease"
        }else{
          navLinksContainer.style.transition = "none"
        }
    }).observe(document.body)

</script>

  <script>

    $('.slider_slick').slick({
      slidesToShow: 4,
      slidesToscroll: 1,
      autoplay: true,
      autoplayspeed: 2000,
      prevArrow: '<i class="fa-solid fa-angle-right right_arrow">',
      nextArrow: '<i class="fa-solid fa-angle-left left_arrow">',
        responsive: [
        {
          breakpoint: 900,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 1,
            infinite: true,
            
          }
        },
        {
          breakpoint: 600,
          settings: {
            slidesToShow: 1,
            slidesToScroll: 1
          }
        },
      ]
  });

  </script>
 
  <script>
    new Vue({
      el: '#my-form',
      delimiters: ['%{', '}'],
      data:{
          message: '',
          address: '',
          name: '',
          phone: '',
          email: '',
          date: '',
          time: '',
          money: '',
          take_intervention: '',
          confirm: '',
          nbr_pro: '',
      },
      computed:{
        
      },
      mounted(){
        
      },
      methods:{
        
        sendData(){
          
            if(this.address === ""){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: 'veuillez saisir votre addresse !!!',
                showConfirmButton: false,
                timer: 1500
              })
            }else if(this.take_intervention === ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: 'veuillez selectionner le Rendez-vous !!!',
                showConfirmButton: false,
                timer: 1500
              })
            }else if(this.nbr_pro == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez sellectionner un professionnel!!! ",
                showConfirmButton: false,
                timer: 1500
              })
            }else if(this.name == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez saisir votre nom & prénom !!! ",
                showConfirmButton: false,
                timer: 1500
              })
            }else if(this.phone == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez saisir un numéro de téléphone pour vous joindre !!! ",
                showConfirmButton: false,
                timer: 1500
              })
            }else if(this.email == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez saisir votre addresse Mail ",
                showConfirmButton: false,
                timer: 1500
              })
            }else if(this.money == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez selectionner un moyen de payement !!!",
                showConfirmButton: false,
                timer: 1500
              })
            }else{
              if(this.confirm){
                
                let myForm = new FormData();
                myForm.append('address', this.address)
                myForm.append('time', this.time)
                myForm.append('date', this.date)
                myForm.append('nbr_pro', this.nbr_pro)
                myForm.append('name', this.name)
                myForm.append('email', this.email)
                myForm.append('phone', this.phone)
                myForm.append('message', this.message)
                myForm.append('money', this.money)
                
  
                axios.defaults.xsrfCookieName = 'XSRF-TOKEN'
                axios.defaults.xsrfHeaderName = 'X-XSRF-TOKEN'
                axios.post("{% url 'postData' %}", myForm, {})
                .then((response) =>{
                  if(response.data.success){
                    Swal.fire({
                      icon: 'success',
                      title: 'Reservation effectuée',
                      text: response.data.msg ,
                      showConfirmButton: false,
                      timer: 2000
                    });
                    this.address = '';
                    this.time = '';
                    this.date = '';
                    this.nbr_pro = '';
                    this.name = '';
                    this.email = '';
                    this.phone = '';
                    this.message = '';
                    this.money = '';
                    this.confirm = false;
                  }else{
                    Swal.fire({
                      icon: 'error',
                      title: 'Erreur',
                      text: response.data.msg ,
                      showConfirmButton: false,
                      timer: 1500
                    });
                    console.log(this.date)
                  }
                })
              }else{
                Swal.fire({
                  icon: 'error',
                  title: 'Erreur',
                  text: "Veuillez cocher nos  conditions générales d'utilisation" ,
                  showConfirmButton: false,
                  timer: 1500
                })
              }

              
            }
         

        }
      },
      
    })
  </script>

</body>
 
</html>