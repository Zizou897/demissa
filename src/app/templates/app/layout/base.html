{% load static %}
<!DOCTYPE html>
<html>

<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_GTM-PH8HKXJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GA_TRACKING_GTM-PH8HKXJ');
</script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PH8HKXJ');</script>
<!-- End Google Tag Manager -->
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="google-site-verification" content="V283-Y5wdEtKqEtkCva4MCstnt5Z7Co64GTiBEGIFv8" />
  <meta name="keywords" content="{{get_referencements.keyword}}" />
  <meta name="description" content="{{get_referencements.description}}" />
  <meta name="author" content="{{get_referencements.author}}" />
  <link rel="shortcut icon" href="{{get_infos_web.picture.url}}" type="">

  <title>{{get_referencements.title}}</title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href=" {% static 'app/css/bootstrap.css' %} " />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

  <!--owl slider stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v6.2.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&display=swap" rel="stylesheet">

        
  <!-- font awesome style -->
  <link href="{% static 'app/css/font-awesome.min.css' %}" rel="stylesheet" />

  <!-- Custom styles for this template -->

  <link href="{% static 'app/css/responsive.css' %}" rel="stylesheet" />
  <link href="{% static 'app/css/slick.css' %}" rel="stylesheet" />
  <link href="{% static 'app/css/style.css' %}" rel="stylesheet" />
  <link href="{% static 'app/css/style1.css' %}" rel="stylesheet" />
  <!-- responsive style -->



</head>

<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PH8HKXJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  <!-- Menu-->
  {% if is_true %}
  {% else %}
  <header class="b-nav">
    <a href="{% url 'welcome' %}" class="nav-icon" aria-label="visit-home" aria-current="page">
      <img src="{{get_infos_web.picture.url}}" alt="logo" srcset=""><span>DE-MISSA</span>
    </a>

    <div class="middle">
        <span><i class="fa-solid fa-circle-plus fa-lg"></i></span> <a href="{% url 'service' %}"> Demande un service</a>
    </div>

    <div class="main-navlink">
      <button class="hamburger" type="button" aria-label="Toggle navigation" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <div class="navlinks-container">
          <a href="{% url 'welcome' %}" aria-current="page">Accueil</a>
          <a href="{% url 'inscription' %}" >Devenir prestataire</a>
          <a href="{% url 'contact' %}" >Contact</a>
      </div>
    </div>
  </header>

  {% endif %}

{% block content %}



{% endblock content %}



  <!-- footer section -->
  {% if is_true %}

  {% else %}
  <section class="footer_section mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-2 mx-auto footer_col">
          <div class="footer_link_box">
            <h4 style="text-decoration: underline;">
              Services
            </h4>
            <div class="footer_links">
              <a class="active" href="{% url 'service' %}">
                Demander un service
              </a>
              <a class="" href="{% url 'inscription' %}">
                Devenir prestataire
              </a>

            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-2 mx-auto footer_col">
          <div class="footer_link_box">
            <h4 style="text-decoration: underline;">
              Autres pages
            </h4>
            <div class="footer_links">
              <a class="active" href="{% url 'contionGeneral' %}">
                Conditions Générales
              </a>
              <a class="" href="{% url 'mentionLegal' %}">
                Mention Légales
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 mx-auto footer_col">
          <div class="footer_contact">
            <h4 style="text-decoration: underline;">
              Contactez-nous
            </h4>
            <div class="contact_link_box">
              <a>
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span>
                  Cocody /Bonoumin / Phare
                </span>
              </a>
              <a>
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  Tel +225 07 57 80 03 66
                </span>
              </a>
              <a>
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>
                  info.demissa@gmail.com
                </span>
              </a>
            </div>
          </div>

          <div class="footer_social">
            {% for social in get_socials %}
              <a href="{{social.link}}">
                <i class="{{social.icon}}" aria-hidden="true"></i>
              </a>
            {% endfor %}
          </div>

        </div>

        <div class="col-md-6 col-lg-3 mx-auto footer_col">
          <div class="footer_detail">
            <h4 style="text-decoration: underline;">
              DE-MISSA
            </h4>
            <p>
             {{get_infos_web.text}}
            </p>
          </div>
        </div>

      </div>
    </div>
  </section>

  <footer  style="background-color:  rgba(29, 29, 29, 0.945);">
    <div class="container">
      <div class="row footer-info d-flex justify-content-center">

          <p class="">
            &copy; Copyright <span style="color:green; font-weight:bold"> DE-MISSA.</span> Tous droits reservés
            <!--<span id="displayYear"></span> -->
          </p>

      </div>
    </div>
  </footer>
 {% endif %}
  <!-- footer section -->

  <!-- popper js -->
  <script src="https://unpkg.com/htmx.org@1.8.6"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap">
  </script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script>
  <!-- bootstrap js -->
  <!-- jQery -->
  <script type="text/javascript" src="{% static 'app/js/jquery-3.4.1.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/bootstrap.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/slick.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/vue.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/js/custom.js' %}"></script>
  <!-- owl slider -->
  
  <!-- custom js -->
  <!-- Google Map -->
  <!-- End Google Map -->
 <!-- GetButton.io widget -->
<script type="text/javascript">
    (function () {
        var options = {
            whatsapp: " +225 0757800366", // WhatsApp number
            call_to_action: "Contactez-nous", // Call to action
            button_color: "#FF6550", // Color of button
            position: "left", // Position may be 'right' or 'left'
        };
        var proto = 'https:', host = "getbutton.io", url = proto + '//static.' + host;
        var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = url + '/widget-send-button/js/init.js';
        s.onload = function () { WhWidgetSendButton.init(host, proto, options); };
        var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
    })();
</script>
<!-- /GetButton.io widget -->
  <script>
    const humburgerToggler = document.querySelector(".hamburger");
    const navLinksContainer = document.querySelector(".navlinks-container");
    const pictureDevice = document.getElementById("box-header");
    var nav = document.querySelector(".b-nav");
    const descriptionToggler = document.querySelector(".btnDescription")
    const descriptionContainer = document.querySelector(".class-description")




    const toggleDescription = () => {
      descriptionContainer.classList.toggle("open-description")
      descriptionContainer.style.transition = "0.5s"
    }


    window.addEventListener('scroll', function(){
      if(window.pageYOffset > 80){
        nav.classList.add('white', 'shadow');
        nav.style.background = "#fafafa";
        nav.style.transition = "0.4s";
      }else{
        nav.classList.remove('white', 'shadow');
        nav.style.background = "transparent";
      }
    })

    const toggleNav = () => {
      humburgerToggler.classList.toggle("open")
      const ariaToggle = humburgerToggler.getAttribute("aria-expanded") === "true" ? "false" : "true";
      humburgerToggler.setAttribute("aria-expanded", ariaToggle)
      navLinksContainer.classList.toggle("open")
      navLinksContainer.classList.add('white', 'shadow');
      window.addEventListener('click', function(){
        if(window.pageYOffset == 0 && ariaToggle == "true"){
          console.log(ariaToggle)
          nav.style.background = "#fafafa";
          nav.classList.add('white', 'shadow');
          nav.style.transition = "0.4s";
        }
      })
    }

    humburgerToggler.addEventListener("click", toggleNav)
    new ResizeObserver(entries => {
      if(entries[0].contentRect.width <= 950){
        navLinksContainer.style.transition = "transform 0.4s ease"
      }
      else if(entrie[0].contentRect.width <= 420){
        pictureDevice.style.backgroundImage = "url('{{get_banner.picturePhone.url}}')";
        console.log('ok')
      }
      else{
        navLinksContainer.style.transition = "none"
      }
    }).observe(document.body)
    descriptionToggler.addEventListener("click", toggleDescription);



</script>
<script>
  const btnBackService = document.getElementById("btnBack")

  btnBackService.addEventListener("click", function(){
    window.history.back();
  });

</script>


  <script>

    $('.slider_slick').slick({
      slidesToShow: 4,
      slidesToscroll: 1,
      autoplay: true,
      infinite: true,
      pauseOnHover: true,
      autoplayspeed: 2000,
      prevArrow: '<i class="fa-solid fa-angle-right right_arrow">',
      nextArrow: '<i class="fa-solid fa-angle-left left_arrow">',
        responsive: [
        {
          breakpoint: 950,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 1,
            centerPadding: '50px',
            centerMode: true,
            infinite: true,
            prevArrow: false,
            nextArrow: false,
          }
        },
        {
          breakpoint: 600,
          settings: {
            centerMode: true,
            autoplay: false,
            infinite: true,
            centerPadding: '50px',
            slidesToShow: 1,
            slidesToScroll: 1,
            prevArrow: false,
            nextArrow: false,
          }
        },
      ]
  });

  </script>

  <script>
    new Vue({
      el: '#my-form',
      delimiters: ['%{', '}'],
      data:{
          message: '',
          service: '{{get_infos_sousService.name}}',
          address: '',
          name: '',
          phone: '',
          email: '',
          date: '',
          time: '',
          money: '',
          take_intervention: '',
          confirm: false,
          nbr_pro: '',
      },
      computed:{

      },
      mounted(){

      },
      methods:{

        sendData(){
          if(this.confirm){
            if(this.name == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez saisir votre nom & prénom !!! ",
                showConfirmButton: true,

              })
            }else if(this.phone == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez saisir un numéro de téléphone pour vous joindre !!! ",
                showConfirmButton: true,

              })
            }else if(this.email == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez saisir votre addresse Mail ",
                showConfirmButton: true,
              })
            }else if(this.address === ""){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: 'veuillez saisir votre addresse !!!',
                showConfirmButton: true,
              })
            }else if(this.money == ''){
              Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "veuillez selectionner un moyen de payement !!!",
                showConfirmButton: true,
              })
            }else{

              let myForm = new FormData();
              myForm.append('address', this.address)
              myForm.append('time', this.time)
              myForm.append('date', this.date)
              myForm.append('name', this.name)
              myForm.append('email', this.email)
              myForm.append('phone', this.phone)
              myForm.append('money', this.money)
              myForm.append('message', this.message)
              myForm.append('service', this.service)


              axios.defaults.xsrfCookieName = 'XSRF-TOKEN'
              axios.defaults.xsrfHeaderName = 'X-XSRF-TOKEN'
              axios.post("{% url 'postData' %}", myForm, {})
              .then((response) =>{
                if(response.data.success){
                  Swal.fire({
                    icon: 'success',
                    title: 'Reservation effectuée',
                    text: response.data.msg ,
                    showConfirmButton: true,
                  });
                  this.address = '';
                  this.time = '';
                  this.date = '';
                  this.nbr_pro = '';
                  this.name = '';
                  this.email = '';
                  this.phone = '';
                  this.message = '';
                  this.money = '';
                  this.service = '';
                  this.confirm = false;
                }else{
                  Swal.fire({
                    icon: 'error',
                    title: 'Erreur',
                    text: response.data.msg ,
                    showConfirmButton: true,
                  });
                  console.log(this.date)
                }
              })

            }
          }else{
            Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: "Veuillez cocher les conditions générales d'utilisations",
                showConfirmButton: true,
              })
          }

        }
      },

    })

    new Vue({
      el: "#contact-form",
      delimiters: '',
      data:{
        name: '',
        phone: '',
        email: '',
        messages: '',
      },
      methods:{
        sendDataContact(){
          if(this.name == ''){
            Swal.fire({
              icon: 'error',
              title: 'Erreur',
              text: "veuillez saisir votre nom & prénom !!! ",
              showConfirmButton: true,
            })
          }else if(this.phone == ''){
            Swal.fire({
              icon: 'error',
              title: 'Erreur',
              text: "veuillez saisir un numéro de téléphone pour vous joindre !!! ",
              showConfirmButton: true,
            })
          }else if(this.email == ''){
            Swal.fire({
              icon: 'error',
              title: 'Erreur',
              text: "veuillez saisir votre addresse Mail ",
              showConfirmButton: true,
            })
          }else if(this.address === ""){
            Swal.fire({
              icon: 'error',
              title: 'Erreur',
              text: 'veuillez saisir votre addresse !!!',
              showConfirmButton: true,
            })
          }else{

            let myForm = new FormData();
            myForm.append('name', this.name)
            myForm.append('email', this.email)
            myForm.append('phone', this.phone)
            myForm.append('messages', this.message)

            axios.defaults.xsrfCookieName = 'XSRF-TOKEN'
            axios.defaults.xsrfHeaderName = 'X-XSRF-TOKEN'
            axios.post("{% url 'postDataContact' %}", myForm, {})
            .then((response) =>{
              if(response.data.success){
                Swal.fire({
                  icon: 'success',
                  title: 'Reservation effectuée',
                  text: response.data.msg ,
                  showConfirmButton: true,
                });
                this.name = '';
                this.email = '';
                this.phone = '';
                this.message = '';
              }else{
                Swal.fire({
                  icon: 'error',
                  title: 'Erreur',
                  text: response.data.msg ,
                  showConfirmButton: true,
                });

              }
            })
          }
        }
      }

    })

  </script>

{% load sweetify %}
{% sweetify %}
</body>

</html>